version: "3.9"

services:

  watchtower:
    image: containrrr/watchtower
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
  
  cloudflare-ddns:
    image: oznu/cloudflare-ddns
    restart: always
    env_file: 
      - ../secrets/cloudflareToken
    environment:
      - ZONE=eathtespagheti.eu
      - PROXIED=true

  ofelia:
    image: mcuadros/ofelia:latest
    restart: unless-stopped
    depends_on: 
      - photoprism
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ../ofelia/jobs.ini:/etc/ofelia/config.ini

  yacht:
    hostname: Yacht
    image: selfhostedpro/yacht
    restart: always
    environment: 
      - PUID=1000
      - GUID=1000
      - ADMIN_EMAIL=sussarellu98@gmail.com
      - COMPOSE_DIR=/compose
    ports: 
      - 10004:8000
    volumes: 
      - /run/media/fabio/Configs/yacht:/config
      - /var/run/docker.sock:/var/run/docker.sock
      - $PROJECTS_FOLDER/dockercomposer:/compose
