version: "3.9"

services:

  react_ultimate_resume:
    image: eathtespagheti/react-ultimate-resume
    user: 1000:1000
    ports: 
      - 10012:3000
    volumes: 
      - ./react_ultimate_resume/json_stub.json:/react-ultimate-resume/src/data/json_stub.json

  ethminer:
    hostname: BigChameleon
    image: eathtespagheti/ethminer
    user: 1000:1000
    restart: always
    ports:
      - 10005:80
    environment: 
      - SCHEME=stratum1+tcp
      - USERNAME=BigChameleon
      - WORKERNAME=BigChameleon.001
      - POOLADDRESS=ethash.poolbinance.com
      - POOLPORT=1800
      - API_PORT=80
      - RECHECK_TIME=2000
      - PASSWORD=123456
    volumes: 
      - /etc/OpenCL:/etc/OpenCL:ro
      - /usr/lib:/usr/externalibs:ro
      - /opt/amdgpu:/opt/amdgpu:ro
      - /opt/amdgpu-pro:/opt/amdgpu-pro:ro
      - /usr/share/libdrm:/usr/share/libdrm:ro
    devices: 
      - /dev/dri/card1:/dev/dri/card1
      - /dev/dri/renderD129:/dev/dri/renderD129

  ferdi:
    image: getferdi/ferdi-server
    environment:
      - EXTERNAL_DOMAIN=ferdi.eathtespagheti.eu
      - SMPT_HOST=smtp
      - SMTP_PORT=25
      - MAIL_USERNAME=
      - MAIL_PASSWORD=
      - MAIL_SENDER=noreply@ferdi.eathtespagheti.eu
    volumes:
      - /run/media/fabio/Configs/Ferdi/config:/config
      - /run/media/fabio/Configs/Ferdi/database:/app/database
      - /run/media/fabio/Configs/Ferdi/recipes:/app/recipes
    ports:
      - 10008:80
    restart: unless-stopped

  hoppscotch:
    image: hoppscotch/hoppscotch:latest
    ports:
      - 10013:3000

  kms:
    image: teddysun/kms
    restart: unless-stopped
    depends_on: 
      - nginx
    ports:
      - 1688:1688

  picard:
    image: mikenye/picard
    restart: unless-stopped
    ports:
      - 5800:5800
    environment:
      - DISPLAY_HEIGHT=950
    volumes:
      - /run/media/fabio/Configs/picard:/config
      - /run/media/fabio/Nextcloud/data/fabio/files/Music:/storage

  transmission:
    hostname: Transmission
    image: ghcr.io/linuxserver/transmission
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Amsterdam
      - USER=fabio
      - FILE__PASS=/run/secrets/transmission_password
    volumes:
      - /run/media/fabio/Configs/transmission:/config
      - /run/media/fabio/Twins/Alpha:/run/media/fabio/Alpha
      - /run/media/fabio/Nextcloud/data/fabio/files/Music:/home/fabio/Music
    ports:
      - 9091:9091
      - 51413:51413
      - 51413:51413/udp
    secrets:
      - transmission_password

secrets:
  transmission_password:
    file: ./secrets/transmission_password
