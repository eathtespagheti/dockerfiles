version: "3.9"

services:

  ferdi:
    image: getferdi/ferdi-server
    environment:
      - EXTERNAL_DOMAIN=ferdi.eathtespagheti.eu
      - SMPT_HOST=smtp
      - SMTP_PORT=25
      - MAIL_USERNAME=
      - MAIL_PASSWORD=
      - MAIL_SENDER=noreply@ferdi.eathtespagheti.eu
    volumes:
      - /run/media/fabio/Configs/Ferdi/config:/config
      - /run/media/fabio/Configs/Ferdi/database:/app/database
      - /run/media/fabio/Configs/Ferdi/recipes:/app/recipes
    ports:
      - 10008:80
    restart: unless-stopped

  hoppscotch:
    image: hoppscotch/hoppscotch:latest
    ports:
      - 10013:3000

  kms:
    image: teddysun/kms
    restart: unless-stopped
    depends_on: 
      - nginx
    ports:
      - 1688:1688

  picard:
    image: mikenye/picard
    restart: unless-stopped
    ports:
      - 5800:5800
    environment:
      - DISPLAY_HEIGHT=950
    volumes:
      - /run/media/fabio/Configs/picard:/config
      - /run/media/fabio/Nextcloud/data/fabio/files/Music:/storage

  transmission:
    hostname: Transmission
    image: ghcr.io/linuxserver/transmission
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Amsterdam
      - USER=fabio
      - FILE__PASS=/run/secrets/transmission_password
    volumes:
      - /run/media/fabio/Configs/transmission:/config
      - /run/media/fabio/Twins/Alpha:/run/media/fabio/Alpha
      - /run/media/fabio/Nextcloud/data/fabio/files/Music:/home/fabio/Music
    ports:
      - 9091:9091
      - 51413:51413
      - 51413:51413/udp
    secrets:
      - transmission_password

secrets:
  transmission_password:
    file: ./secrets/transmission_password
